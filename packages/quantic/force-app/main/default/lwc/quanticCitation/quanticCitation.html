<template>
  <li
    class="citation slds-m-right_xx-small slds-m-vertical_xx-small slds-is-relative"
  >
    <a
      class="citation__link slds-badge slds-badge_lightest slds-align_absolute-center slds-text-link_reset slds-p-left_xx-small slds-p-right_x-small"
      aria-label={citationTitle}
      href={hrefValue}
      target="_blank"
      rel="noopener"
      onmouseenter={handleMouseEnter}
      onmouseleave={handleMouseLeave}
      onclick={handleClick}
    >
      <p
        class="citation__title slds-m-left_x-small slds-truncate slds-has-flexi-truncate"
      >
        {citationTitle}
      </p>
    </a>
    <c-quantic-tooltip
      light-theme
      class="slds-show_medium"
      target={template.host}
    >
      <div
        class="citation__tooltip"
        slot="content"
        onmouseenter={handleTooltipMouseEnter}
        onmouseleave={handleTooltipMouseLeave}
      >
        <div
          data-testid="citation__tooltip-uri"
          class="slds-text-body_small slds-text-color_weak slds-truncate slds-var-p-vertical_xxx-small"
        >
          {hrefValue}
        </div>
        <div
          data-testid="citation__tooltip-title"
          class="slds-text-title_bold slds-var-p-vertical_xx-small"
        >
          {citationTitle}
        </div>
        <div
          data-testid="citation__tooltip-text"
          class="citation__tooltip-text slds-text-body_small slds-var-p-vertical_xxx-small"
        >
          {text}
        </div>
        <template lwc:if={isCitationAttached}>
          <lightning-button
            onclick={handleCitationDocumentClick}
            variant="base"
            icon-name="utility:detach"
            icon-position="left"
            label="Detach document"
            size="x-small"
            class="slds-var-m-top_xx-small"
          ></lightning-button>
        </template>
        <template lwc:else>
          <lightning-button
            onclick={handleCitationDocumentClick}
            variant="base"
            icon-name="utility:attach"
            icon-position="left"
            label="Attach document"
            size="x-small"
            class="slds-var-m-top_xx-small"
          ></lightning-button>
        </template>
      </div>
    </c-quantic-tooltip>
  </li>
</template>
