<template>
  <template lwc:if={shouldDisplayGeneratedAnswer}>
    <div
      data-cy="generated-answer__card"
      class="slds-box generated-answer__card"
    >
      <div
        class="slds-var-m-bottom_medium slds-grid generated-answer__card-header"
      >
        <span class="generated-answer__badge slds-var-p-around_x-small"
          >{labels.generatedAnswerForYou}</span
        >
        <template if:false={hasRetryableError}>
          <c-quantic-feedback
            state={feedbackState}
            onlike={handleLike}
            ondislike={handleDislike}
            like-icon-name="utility:like"
            like-label={labels.thisAnswerWasHelpful}
            dislike-icon-name="utility:dislike"
            dislike-label={labels.thisAnswerWasNotHelpful}
            size="x-small"
            question=""
            hide-explain-why-button
            hide-labels
            data-cy="generated-answer__feedback"
          ></c-quantic-feedback>
        </template>
      </div>
      <template if:false={hasRetryableError}>
        <div data-cy="generated-answer__content" class={generatedContentClass}>
          {answer}
        </div>
        <template lwc:if={hasCitations}>
          <div class="slds-var-m-top_small">
            <c-quantic-source-citations
              data-cy="generated-answer__citations"
              citations={citations}
              citation-click-handler={handleCitationClick}
            ></c-quantic-source-citations>
          </div>
        </template>
      </template>
      <template if:true={hasRetryableError}>
        <div>{labels.couldNotGenerateAnAnswer}</div>
        <div class="slds-var-m-top_small">
          <lightning-button
            data-cy="generated-answer__retry-button"
            variant="brand-outline"
            label={labels.tryAgain}
            title={labels.tryAgain}
            onclick={handleRetry}
          ></lightning-button>
        </div>
      </template>
    </div>
  </template>
</template>
