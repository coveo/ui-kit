<template>
    <div
        id="listbox-id"
        class="slds-dropdown slds-dropdown_length-5 slds-dropdown_fluid"
        role="listbox">
        <ul class="slds-listbox slds-listbox_vertical" role="presentation">
            <template for:each={suggestionsToRender} for:item="suggestion">
                <li key={suggestion.rawValue}
                    role="presentation"
                    class="slds-listbox__item"
                    data-rawvalue={suggestion.rawValue}
                    onclick={handleSuggestionSelection}
                    onmouseover={handleSuggestionHover}
                    onmousedown={preventDefault}>
                    <template if:true={suggestion.isSelected}>
                        <div class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small slds-has-focus" role="option" aria-selected="true">
                            <span class="slds-media__figure slds-listbox__option-icon"></span>
                            <span class="slds-media__body">
                                <lightning-formatted-rich-text class="slds-truncate" value={suggestion.value}></lightning-formatted-rich-text>
                            </span>
                        </div>
                    </template>
                    <template if:false={suggestion.isSelected}>
                        <div class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small" role="option">
                            <span class="slds-media__figure slds-listbox__option-icon"></span>
                            <span class="slds-media__body">
                                <lightning-formatted-rich-text class="slds-truncate" value={suggestion.value}></lightning-formatted-rich-text>
                            </span>
                        </div>
                    </template>
                </li>
            </template>
        </ul>
    </div>
</template>