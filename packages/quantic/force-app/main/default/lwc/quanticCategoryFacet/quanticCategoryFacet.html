<template>
    <template if:true={hasParentsOrValues}>
        <lightning-card title={label}>
            <lightning-button-icon
                class="slds-var-p-bottom_small facet__collapse"
                slot="actions"
                onclick={toggleFacetVisibility}
                icon-name={collapseIconName}
                alternative-text="Collapse/show facet"
                variant="bare">
            </lightning-button-icon>
            <template if:false={isCollapsed}>
                <ul class="slds-has-dividers_around-space">
                    <template if:true={hasParents}>
                       <li class="slds-var-m-horizontal_medium slds-grid">
                           <div onclick={reset}>
                                <lightning-button-icon variant="bare" icon-name="utility:chevronleft"></lightning-button-icon>
                                <span class="nowrap">{labels.allCategories}</span>
                           </div> 
                       </li> 
                    </template>
                    <template for:each={nonActiveParents} for:item="v">
                        <c-quantic-category-facet-parent onselectvalue={onSelect} key={v.value} item={v}></c-quantic-category-facet-parent>
                    </template>
                    <template if:true={activeParent}>
                        <li class="slds-var-m-horizontal_medium slds-grid">
                            <span class="nowrap facet-text__bold slds-var-m-horizontal_small">{activeParent.value} ({activeParent.numberOfResults})</span>
                        </li>  
                    </template>
                    <li class=" slds-var-m-horizontal_medium facet-list_type slds-grid">
                        <ul>
                        <template for:each={values} for:item="v">
                            <c-quantic-category-facet-value onselectvalue={onSelect} key={v.value} item={v}></c-quantic-category-facet-value>
                        </template>
                        </ul>
                    </li>
                </ul>
                <template if:true={canShowLess}>
                    <button variant="base" label={labels.showLess}
                      class="slds-var-m-left_x-small facet__show-less" onclick={showLess}>
                      <span class="facet__show-less_text">- {labels.showLess}</span>
                    </button>
                </template>
                <template if:true={canShowMore}>
                    <button variant="base" label={labels.showMore}
                      class="slds-var-m-left_x-small facet__show-more" onclick={showMore}>
                      <span class="facet__show-more_text">+ {labels.showMore}</span>
                    </button>
                </template> 
            </template>
        </lightning-card>
    </template>
</template>
