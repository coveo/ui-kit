<template>
  <template if:true={showPlaceholder}>
    <c-quantic-placeholder variant="card" number-of-rows={numberOfValues}></c-quantic-placeholder>
  </template>
  <template if:true={hasValues}>
    <div class="slds-size_1-of-1">
      <c-quantic-card-container title={label}>
        <lightning-button-icon
          class="actionButtonCssClasses"
          slot="actions"
          onclick={toggleFacetVisibility}
          onmousedown={preventDefault}
          icon-name={actionButtonIcon}
          alternative-text={actionButtonLabel}
          variant="bare"
        >
        </lightning-button-icon>
        <template if:true={hasActiveValues}>
          <button class="facet__clear-filter slds-button slds-grid slds-grid_vertical-align-center slds-var-p-top_x-small slds-var-p-horizontal_x-small" onclick={clearSelections}>
            <lightning-icon class="slds-current-color slds-var-m-right_xx-small" icon-name="utility:close" alternative-text={altText} size="xx-small"></lightning-icon>
            <span class="nowrap pill__text-container slds-truncate">{clearFilterLabel}</span>
          </button>
        </template>
        <template if:false={isCollapsed}>
          <ul class="slds-has-dividers_around-space slds-var-m-top_medium">
            <template if:true={withInput}>
              <div>
                <form onsubmit={onApply} class="slds-grid slds-var-p-bottom_small slds-var-p-top_small">
                    <div class="slds-col slds-p-around_none">
                        <lightning-input 
                            type="number"
                            step={step}
                            required
                            value={start}
                            min={minSafeValue}
                            max={end}
                            message-when-range-overflow={customMessageOverflow}
                            class="numeric__input-min" 
                            label={labels.min} 
                            variant="label-hidden"
                            placeholder={labels.min}
                            aria-label={numberInputMinimumLabel}
                            onchange={onChangeMin}>
                        </lightning-input>
                    </div>
                    <div class="slds-col">
                        <lightning-input 
                            type="number"
                            step={step}
                            required
                            value={end}
                            min={start}
                            max={maxSafeValue}
                            message-when-range-underflow={customMessageUnderflow}
                            class="numeric__input-max"
                            label={labels.max} 
                            variant="label-hidden" 
                            placeholder={labels.max}
                            aria-label={numberInputMaximumLabel}
                            onchange={onChangeMax}>
                        </lightning-input>
                    </div>
                    <div class="slds-col slds-p-around_none">
                        <lightning-button 
                            label={labels.apply} 
                            title={labels.apply} 
                            aria-label={numberInputApplyLabel}
                            type="submit"
                            class="slds-size_small">
                        </lightning-button>
                    </div>
                </form>
            </div>
            </template>
            <template if:true={showValues}>
               <template for:each={values} for:item="v">
                <c-quantic-facet-value 
                  onselectvalue={onSelectValue} 
                  key={v.start} 
                  item={v} 
                  is-checked={v.checked}
                  formatting-function={formattingFunction}>
                </c-quantic-facet-value>
              </template>
            </template>
          </ul>
        </template>
      </c-quantic-card-container>
    </div>
  </template>
</template>
