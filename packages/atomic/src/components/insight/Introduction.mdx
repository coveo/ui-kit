import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Insight/Introduction" />

# Atomic Insight Components

An Insight Panel is a Coveo integration search interface that lets the end users of a CSM or CRM system access contextually relevant items without leaving the record theyâ€™re viewing or editing (such as a support case or incident report).

You can explore the individual Insight components in the sidebar. 
Each component includes:

* Interactive examples with configurable properties
* Code snippets showing implementation details
* Documentation for available attributes and events

You can also find an example of an implementation below:
* [Insight Interface](/story/atomic-insight-interface--default)

## Getting Started
These stories provide example usages of the Coveo Atomic web components for Insight.
Each of the components must be placed correctly within the component hierarchy in order to function.
The top level of the tree must match the interface being initialized by the Headless engine.
For example, Coveo Insight pages must start have `atomic-insight-interface` at the top of the component hierarchy.

### Initialization

Here is an example of how to initialize an `atomic-insight-interface`.
This uses `getSampleInsightEngineConfiguration` from `@coveo/headless/insight` as its initialization configuration.
This will not work in a production environment.

For a detailed breakdown of how to configure an insight engine, please refer to the Coveo Headless documentation for [`buildInsightEngine`](https://docs.coveo.com/en/headless/latest/reference/functions/Insight.buildInsightEngine.html).
```html
<html>
  <head>
    <title>Example Insight Panel</title>
    <script
        type="module"
        src="https://static.cloud.coveo.com/atomic/v3/atomic.esm.js">
    </script>

    <script type="module">
      const {
        getSampleInsightEngineConfiguration,
      } = await import('https://static.cloud.coveo.com/headless/v3/insight/headless.esm.js');

      await customElements.whenDefined('atomic-insight-interface');
      const insightInterface = document.querySelector('atomic-insight-interface');
      await insightInterface.initialize(getSampleInsightEngineConfiguration());
      insightInterface.executeFirstSearch();
    </script>
  </head>
  <body>
    <atomic-insight-interface>
      <!-- The rest of your component hierarchy -->
    </atomic-insight-interface>
  </body>
</html>
```

### Initialization with an engine
Here is an example of how to initialize an `atomic-insight-interface` with an engine from `@coveo/headless`.
The primary difference in the use cases between a standard initialization and using an engine is that an engine allows for a single instance to be shared across multiple interfaces.

```javascript
// engine.mjs
const {
  buildInsightEngine, 
  getSampleInsightEngineConfiguration
} = await import('https://static.cloud.coveo.com/headless/v3/insight/headless.esm.js');

export const insightEngine = buildInsightEngine({
  configuration: getSampleInsightEngineConfiguration(),
});

```
```html
<!-- index.html -->
<html>
  <head>
    <title>Example Insight Panel</title>
    <script
        type="module"
        src="https://static.cloud.coveo.com/atomic/v3/atomic.esm.js">
    </script>

    <script type="module">
      import {insightEngine} from './engine.mjs';

      await customElements.whenDefined('atomic-insight-interface');
      const insightInterface = document.querySelector('atomic-insight-interface');
      await insightInterface.initializeWithInsightEngine(insightEngine);
      insightInterface.executeFirstSearch();
    </script>
  </head>
  <body>
    <atomic-insight-interface>
      <!-- The rest of your component hierarchy -->
    </atomic-insight-interface>
  </body>
</html>
```


