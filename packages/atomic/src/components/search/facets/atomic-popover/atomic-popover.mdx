import { Meta } from '@storybook/addon-docs/blocks';
import * as AtomicPopoverStories from './atomic-popover.new.stories';
import { AtomicDocTemplate } from '../../../../storybook-utils/documentation/atomic-doc-template';


<Meta of={AtomicPopoverStories} />

<AtomicDocTemplate
  stories={AtomicPopoverStories}
  githubPath="search/facets/atomic-popover/atomic-popover.ts"
  tagName="atomic-popover"
  className="AtomicPopover"
>

The `atomic-popover` component displays any facet as a popover menu. This allows facets to be rendered in a more compact way, saving valuable screen space while still providing full facet functionality.

## Usage

Wrap any supported facet component inside the `atomic-popover` tags:

```html
<atomic-search-interface>
  <!-- other components -->
  
  <atomic-popover>
    <atomic-facet field="objecttype" label="Object Type"></atomic-facet>
  </atomic-popover>

  <!-- other components -->
</atomic-search-interface>
```

## Features

- **Space-efficient**: Displays facets as compact buttons that expand when clicked
- **Backdrop overlay**: Shows a backdrop when open to focus user attention
- **Keyboard accessible**: Supports Escape key to close the popover
- **Focus management**: Uses `atomic-focus-trap` to manage keyboard focus
- **Active value count**: Displays the number of currently selected facet values

## Supported Facets

The `atomic-popover` component can wrap any of the following facet types:

- `atomic-facet`
- `atomic-numeric-facet`
- `atomic-timeframe-facet`
- `atomic-category-facet`
- `atomic-color-facet`
- `atomic-rating-facet`
- `atomic-rating-range-facet`

## Example with Multiple Popovers

```html
<atomic-search-interface>
  <!-- other components -->
  
  <atomic-popover>
    <atomic-facet field="objecttype" label="Content Type"></atomic-facet>
  </atomic-popover>

  <atomic-popover>
    <atomic-facet field="author" label="Author"></atomic-facet>
  </atomic-popover>

  <atomic-popover>
    <atomic-timeframe-facet label="Date" with-date-picker></atomic-timeframe-facet>
  </atomic-popover>

  <!-- other components -->
</atomic-search-interface>
```

## Customization

The component exposes several shadow parts for styling:

- `popover-button`: The button to click to display or hide the popover menu
- `value-label`: The associated facet label
- `value-count`: Number of selected values for the facet
- `arrow-icon`: The arrow icon on the button
- `facet`: The wrapper that contains the slotted facet
- `backdrop`: The transparent backdrop behind the popover menu
- `placeholder`: The placeholder displayed when the facet is loading

```css
atomic-popover::part(popover-button) {
  /* Customize the popover button */
}

atomic-popover::part(value-count) {
  /* Customize the count display */
}
```

## Related Components

- [atomic-facet](?path=/docs/atomic-facet--docs): Standard facet for text values
- [atomic-numeric-facet](?path=/docs/atomic-numeric-facet--docs): Facet for numeric ranges
- [atomic-timeframe-facet](?path=/docs/atomic-timeframe-facet--docs): Facet for date ranges

</AtomicDocTemplate>
