import { Meta } from '@storybook/addon-docs/blocks';
import * as AtomicResultChildrenTemplateStories from './atomic-result-children-template.new.stories';
import { AtomicDocTemplate } from '../../../../storybook-utils/documentation/atomic-doc-template';


<Meta of={AtomicResultChildrenTemplateStories} />

<AtomicDocTemplate
  stories={AtomicResultChildrenTemplateStories}
  defaultStory="Default"
  githubPath="search/atomic-result-children-template/atomic-result-children-template.ts"
  tagName="atomic-result-children-template"
  className="AtomicResultChildrenTemplate"
>

A `template` element must be the child of an `atomic-result-children-template`, and an `atomic-result-children` must be the parent of each `atomic-result-children-template`.
* Note: Any `<script>` tags defined inside of a `<template>` element will not be executed when results are being rendered.


Example using `atomic-result-children` with `atomic-folded-result-list`:
```html
<atomic-folded-result-list>
  <atomic-result-template>
    <template>
      <atomic-result-section-visual>
        <atomic-result-image field="ytthumbnailurl" fallback="https://picsum.photos/350"></atomic-result-image>
      </atomic-result-section-visual>
      
      <atomic-result-section-title>
        <atomic-result-link></atomic-result-link>
      </atomic-result-section-title>
      
      <atomic-result-section-excerpt>
        <atomic-result-text field="excerpt"></atomic-result-text>
      </atomic-result-section-excerpt>

      <atomic-result-section-children>
        <atomic-result-children>
          <atomic-result-children-template>
            <template>
              <atomic-result-section-visual>
                <atomic-result-image field="ytthumbnailurl" fallback="https://picsum.photos/350"></atomic-result-image>
              </atomic-result-section-visual>
              
              <atomic-result-section-title>
                <atomic-result-link></atomic-result-link>
              </atomic-result-section-title>
              
              <atomic-result-section-excerpt>
                <atomic-result-text field="excerpt"></atomic-result-text>
              </atomic-result-section-excerpt>
            </template>
          </atomic-result-children-template>
        </atomic-result-children>
      </atomic-result-section-children>
    </template>
  </atomic-result-template>
</atomic-folded-result-list>
```

## Template Conditions

You can use conditions to display different child result templates based on result properties:

```html
<atomic-result-children>
  <!-- Template for YouTube video children -->
  <atomic-result-children-template must-match-sourcetype="YouTube">
    <template>
      <atomic-result-section-visual>
        <atomic-result-image field="ytthumbnailurl"></atomic-result-image>
      </atomic-result-section-visual>
      <atomic-result-section-title>
        <atomic-result-link></atomic-result-link>
      </atomic-result-section-title>
      <atomic-result-section-excerpt>
        <atomic-result-text field="excerpt"></atomic-result-text>
      </atomic-result-section-excerpt>
    </template>
  </atomic-result-children-template>

  <!-- Default template for all other child results -->
  <atomic-result-children-template>
    <template>
      <atomic-result-section-title>
        <atomic-result-link></atomic-result-link>
      </atomic-result-section-title>
      <atomic-result-section-excerpt>
        <atomic-result-text field="excerpt"></atomic-result-text>
      </atomic-result-section-excerpt>
    </template>
  </atomic-result-children-template>
</atomic-result-children>
```

## Nested Folding with Inherit Templates

For deeply nested hierarchical results, you can use `inherit-templates` on `atomic-result-children` to reuse the same template structure:

```html
<atomic-result-children-template>
  <template>
    <atomic-result-section-title>
      <atomic-result-link></atomic-result-link>
    </atomic-result-section-title>
    <atomic-result-section-excerpt>
      <atomic-result-text field="excerpt"></atomic-result-text>
    </atomic-result-section-excerpt>
    
    <!-- Nested children inherit the same template -->
    <atomic-result-section-children>
      <atomic-result-children inherit-templates></atomic-result-children>
    </atomic-result-section-children>
  </template>
</atomic-result-children-template>
```

</AtomicDocTemplate>
