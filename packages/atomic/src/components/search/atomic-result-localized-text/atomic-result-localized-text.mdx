import { Meta } from '@storybook/addon-docs/blocks';
import * as AtomicResultLocalizedTextStories from './atomic-result-localized-text.new.stories';
import { AtomicDocTemplate } from '../../../../storybook-utils/documentation/atomic-doc-template';


<Meta of={AtomicResultLocalizedTextStories} />

<AtomicDocTemplate
  stories={AtomicResultLocalizedTextStories}
  githubPath="search/atomic-result-localized-text/atomic-result-localized-text.ts"
  tagName="atomic-result-localized-text"
  className="AtomicResultLocalizedText"
>

The `atomic-result-localized-text` component renders a localized i18n string using values from result fields.

This component is used within `atomic-result-template` components inside the result list to display dynamic, translated content:

```html
<atomic-search-interface>
  ...
  <atomic-result-list>
    <atomic-result-template>
      <template>
        <atomic-result-localized-text 
          locale-key="book_by_author" 
          field-author="name">
        </atomic-result-localized-text>
      </template>
    </atomic-result-template>
  </atomic-result-list>
  ...
</atomic-search-interface>
```

### Basic Usage

First, register your i18n translations:

```javascript
searchInterface.i18n.addResourceBundle('en', 'translation', {
  'book_by_author': 'Book by {{name}}'
});
```

Then use the component to map result fields to translation parameters:

```html
<atomic-result-localized-text 
  locale-key="book_by_author" 
  field-author="name">
</atomic-result-localized-text>
```

If the result has `author: "Isaac Asimov"`, this renders: **"Book by Isaac Asimov"**

### Multiple Field Mappings

You can map multiple result fields to different i18n parameters:

```javascript
searchInterface.i18n.addResourceBundle('en', 'translation', {
  'product_info': '{{brand}} - {{name}} ({{price}})'
});
```

```html
<atomic-result-localized-text 
  locale-key="product_info" 
  field-brand="brand"
  field-name="name" 
  field-price="price">
</atomic-result-localized-text>
```

### Pluralization

Use the `field-count` attribute to handle singular/plural forms:

```javascript
searchInterface.i18n.addResourceBundle('en', 'translation', {
  'book_count': 'You have {{count}} book',
  'book_count_other': 'You have {{count}} books'
});
```

```html
<atomic-result-localized-text 
  locale-key="book_count" 
  field-count="bookcount">
</atomic-result-localized-text>
```

The component automatically uses the singular or plural form based on the count value.

### Field Attribute Mapping

The `field-*` attributes follow this pattern:
- **Attribute name:** `field-{resultFieldName}`
- **Attribute value:** `{i18nParameterName}`

For example:
- `field-author="name"` â†’ reads `result.raw.author` and passes it as the `{{name}}` parameter in the i18n string

</AtomicDocTemplate>
