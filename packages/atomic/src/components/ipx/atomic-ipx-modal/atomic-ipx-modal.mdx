import { Meta } from '@storybook/addon-docs/blocks';
import * as AtomicIpxModalStories from './atomic-ipx-modal.new.stories';
import { AtomicDocTemplate } from '@/storybook-utils/documentation/atomic-doc-template';

<Meta of={AtomicIpxModalStories} />

<AtomicDocTemplate
  stories={AtomicIpxModalStories}
  githubPath="ipx/atomic-ipx-modal/atomic-ipx-modal.ts"
  tagName="atomic-ipx-modal"
  className="AtomicIPXModal"
  defaultStory="Default"
>

The `atomic-ipx-modal` component provides a modal dialog for displaying In-Product Experience (IPX) content.
It manages the modal state, handles touch events to prevent scrolling when open, and provides slots for customizable header, body, and footer content.

## Usage

The modal can be controlled programmatically by setting the `is-open` property:

```html
<atomic-search-interface>
  <atomic-ipx-modal is-open="false">
    <div slot="header">
      <h2>Modal Title</h2>
      <button onclick="this.closest('atomic-ipx-modal').isOpen = false">
        Close
      </button>
    </div>
    <div slot="body">
      <p>Modal content goes here.</p>
    </div>
    <div slot="footer">
      <button>Action</button>
    </div>
  </atomic-ipx-modal>
</atomic-search-interface>
```

## Slots

- **header**: Content displayed at the top of the modal
- **body**: Main content area of the modal
- **footer** (optional): Content displayed at the bottom of the modal. If no content is provided, the footer will not be displayed.

## Behavior

- When `is-open` is `true`, the modal is displayed and a class `atomic-ipx-modal-opened` is added to both `document.body` and the interface element
- Touch events are prevented when the modal is open to avoid unwanted scrolling
- The modal automatically detects if footer content is present and adjusts accordingly
- The component emits an `animationEnded` event when modal animations complete

## Styling

The modal can be styled using CSS parts:

- `atomic-ipx-modal`: The main modal container
- `backdrop`: The backdrop element behind the modal
- `container`: The content container (exported from atomic-ipx-body)

You can also customize the modal dimensions using CSS variables:

```css
atomic-ipx-modal {
  --atomic-ipx-width: 40rem;
  --atomic-ipx-height: 50rem;
}
```

</AtomicDocTemplate>
