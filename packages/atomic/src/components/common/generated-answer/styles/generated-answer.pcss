@import '../../../../global/global.pcss';
@import '../../../../global/mixins.pcss';
@import './generated-text.pcss';
@import '../generated-content/generated-markdown-content.pcss';
@import './feedback-buttons.pcss';
@import './rephrase-buttons.pcss';
@import './typing-indicator.pcss';
@import './copy-button.pcss';

@define-mixin mobile-footer-layout {
  & {
    @apply flex-col gap-4;
  }

  .source-citations {
    @apply mr-0;
  }

  [part='rephrase-buttons'] {
    @apply ml-0;
  }

  [part='rephrase-button'] {
    @apply rephrase-with-text flex-auto justify-center;

    .icon-container {
      @apply mx-0;
    }
  }

  [part='rephrase-button-label'] {
    @apply block;
  }
}

@define-mixin mobile-footer-xs-layout {
  & {
    @apply mt-4;
  }

  [part='rephrase-button-label'] {
    @apply hidden;
  }

  .feedback-buttons {
    @apply relative top-0 right-0;
  }
}

@define-mixin mobile-generated-answer-footer-layout {
  & {
    @apply flex-col gap-1;
  }
}

@keyframes cursor-blink {
  0% {
    opacity: 0;
  }
}

[part='container'] {
  container-type: inline-size;
}

.footer {
  @apply flex;

  .source-citations {
    @apply mr-2;
  }

  [part='rephrase-buttons'] {
    @apply ml-auto;
  }

  @container (max-width: 37.5rem) {
    @mixin mobile-footer-layout;
  }
  @screen mobile-only {
    @mixin mobile-footer-layout;
  }
  @container (max-width: 25rem) {
    @mixin mobile-footer-xs-layout;
  }
}

[part='generated-answer-footer'] {
  @container (max-width: 37.5rem) {
    @mixin mobile-generated-answer-footer-layout;
  }

  @screen mobile-only {
    @mixin mobile-generated-answer-footer-layout;
  }
}

[part='generated-container'] {
  &.answer-collapsed {
    @apply max-h-64 overflow-hidden relative content-[''];

    .feedback-buttons {
      @apply hidden;
    }
  }
  &.answer-collapsed:before {
    @apply h-full w-full absolute top-0 left-0 content-[''];
    background: linear-gradient(transparent 11.25rem, white);
  }
}

.is-collapsible {
  @apply justify-between;

  [part='answer-show-button'] {
    @apply flex;
  }
}

.generating-label-visible {
  [part='is-generating'] {
    @apply flex;
  }
}
